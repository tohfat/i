
<html lang="en" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="icon" type="image/x-icon" href="https://www.desktophut.com/images/favicon.png">
<link rel="shortcut icon" href="https://www.desktophut.com/images/favicon.png">

<title>AI Text to Audio – Convert Text to Speech with AI
</title>
<meta name="description" content="Convert text to audio for free with our AI-powered text-to-speech tool. Generate realistic voiceovers and speech instantly. Try it now!">
<meta name="keywords" content="AI text to audio, free text to speech, AI voice generator, text to speech, convert text to voice">
<meta name="author" content="DesktopHut">

<!-- Open Graph / Facebook -->
<meta property="og:type" content="website">
<meta property="og:title" content="Free AI Text to Audio – Convert Text to Speech with AI">
<meta property="og:description" content="Convert text to audio for free with our AI-powered text-to-speech tool. Generate realistic voiceovers and speech instantly.">
<meta property="og:image" content="https://www.desktophut.com/aigenpro.jpg">
<meta property="og:url" content="https://www.desktophut.com/ai-text-to-audio">

<!-- Twitter Card -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:title" content="Free AI Text to Audio – Convert Text to Speech with AI">
<meta name="twitter:description" content="Convert text to audio for free with our AI-powered text-to-speech tool. Generate realistic voiceovers and speech instantly.">
<meta name="twitter:image" content="https://www.desktophut.com/aigenpro.jpg">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>

<script>
	document.head.innerHTML += `
<style>
:root {
--primary-color: #4F46E5;
--primary-light: #6366F1;
--primary-dark: #4338CA;
--secondary-color: #8B5CF6;
--light-bg: #F8FAFC;
--border-color: #E2E8F0;
--text-color: #1E293B;
--text-light: #64748B;
--success-color: #10B981;
--error-color: #EF4444;
--border-radius: 10px;
--box-shadow: 0 4px 10px rgba(0, 0, 0, 0.04), 0 0 1px rgba(0, 0, 0, 0.1);
--transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
--gradient-primary: linear-gradient(135deg, #4F46E5, #7C3AED);
--gradient-secondary: linear-gradient(135deg, #8B5CF6, #C084FC);
--card-bg: #ffffff;
--voice-alloy: #4F46E5;
--voice-echo: #6366F1;
--voice-fable: #8B5CF6;
--voice-onyx: #333333;
--voice-nova: #10B981;
--voice-shimmer: #60A5FA;
--voice-coral: #F87171;
--voice-verse: #FBBF24;
--voice-ballad: #A78BFA;
--voice-ash: #4B5563;
--voice-sage: #059669;
--voice-amuch: #F59E0B;
--voice-aster: #2563EB;
--voice-brook: #3B82F6;
--voice-clover: #EC4899;
--voice-dan: #1F2937;
--voice-elan: #7C3AED;
--voice-marilyn: #DB2777;
--voice-meadow: #34D399;
}
* {
box-sizing: border-box;
margin: 0;
padding: 0;
font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}
body {
background-color: var(--light-bg);
color: var(--text-color);
line-height: 1.5;
padding: 0;
margin: 0;
background-image:
radial-gradient(circle at 80% 10%, rgba(124, 58, 237, 0.03) 0%, transparent 600px),
radial-gradient(circle at 20% 90%, rgba(79, 70, 229, 0.03) 0%, transparent 600px);
}
.container {
max-width: 1400px;
margin: 0 auto;
padding: 1.5rem 1rem; /* 减小顶部和底部内边距 */
}
header {
padding: 1.5rem 0 2rem; /* 减小页眉的内边距 */
text-align: center;
position: relative;
}
h1 {
font-size: 0.6rem;
font-weight: 800;
margin-bottom: 0.75rem; 
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
display: inline-block;
letter-spacing: -0.02em;
}
.description {
font-size: 2rem;
color: var(--text-light);
max-width: 700px;
margin: 0 auto;
line-height: 1.6;
font-weight: 400;

}
.content {
display: flex;
gap: 1.5rem; /* 减小两列间距 */
margin-top: 1.5rem; /* 减小顶部间距 */
position: relative;
}
.text-input-section, .audio-output-section {
flex: 1;
width: 50%;
}
.card {
background-color: var(--card-bg);
border-radius: var(--border-radius);
box-shadow: var(--box-shadow);
padding: 1.25rem; /* 减小卡片内边距 */
margin-bottom: 1.25rem; /* 减小卡片间距 */
transition: var(--transition);
position: relative;
overflow: hidden;
border: 1px solid rgba(226, 232, 240, 0.6);
backdrop-filter: blur(10px);
height: auto; /* 移除固定高度 */
}
.card:hover {
box-shadow: 0 8px 16px rgba(0, 0, 0, 0.06), 0 0 2px rgba(0, 0, 0, 0.1);
transform: translateY(-2px);
}
.section-title {
font-size: 1.25rem;
font-weight: 600;
margin-bottom: 1rem; /* 减小标题下方间距 */
color: var(--text-color);
display: flex;
align-items: center;
}
.section-title i {
margin-right: 0.75rem;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
font-size: 1.1rem;
}

.text-stats {
display: flex;
align-items: center;
margin-bottom: 1rem; /* 减小下方间距 */
font-size: 0.9rem;
color: var(--text-light);
}
.text-stat {
margin-right: 1.5rem;
display: flex;
align-items: center;
}
.text-stat i {
margin-right: 0.4rem;
color: var(--primary-light);
}
.btn {
display: inline-flex;
align-items: center;
justify-content: center;
background: var(--gradient-primary);
color: white;
border: none;
padding: 0.75rem 1.25rem;
height: 2.75rem; /* 减小按钮高度 */

border-radius: var(--border-radius);
font-size: 1rem;
font-weight: 500;
transition: var(--transition);
box-shadow: 0 2px 6px rgba(79, 70, 229, 0.3);
position: relative;
overflow: hidden;
}
.btn::after {
content: '';
position: absolute;
top: 0;
left: 0;
width: 100%;
height: 100%;
background: linear-gradient(rgba(255,255,255,0.1), rgba(255,255,255,0));
opacity: 0;
transition: opacity 0.3s;
}
.btn:hover::after {
opacity: 1;
}

textarea:-ms-input-placeholder {
color: #aaa;
}
textarea::-moz-placeholder {
  color: #aaa;
}
input::-webkit-input-placeholder, textarea::-webkit-input-placeholder {
  color: #aaa;
}


.select {
  -moz-appearance: none;
  -webkit-appearance: none;
border-radius: var(--border-radius);
width: 70%;
padding: 0.3rem;
padding-right: 25px; 
border-color: rgba(var(--primary-light), 0.2);
border-radius: 50px;
resize: vertical;
font-size: 1rem;
margin-bottom: 0.5rem;
transition: var(--transition);
background-color: rgba(255, 255, 255, 0.8);
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
line-height: 1.6;
  color: #aaa; 
  outline: none; 
  position: relative;
}
.select:focus {
  outline: none;
border-color: var(--primary-light);
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
background-color: white;
}
.select::-ms-expand {
  display: none;
}



.select:after, .select:before {
  content: "";
  position: absolute;
  z-index: 2;
  top: 9px;
  right: 10px;
  width: 0;
  height: 0;
  border: 4px dashed;
  border-color: #888 transparent;
  pointer-events: none;
}

.select:before {
  border-bottom-style: solid;
  border-top: none;
}

.select:after {
  margin-top: 7px;
  border-top-style: solid;
  border-bottom: none;
}

textarea {
width: 100%;
height: 180px; /* 减小文本框的高度 */
padding: 1rem;
border-radius: var(--border-radius);
resize: vertical;
font-size: 1rem;
margin-bottom: 0.5rem;
transition: var(--transition);
line-height: 1.6;
background-color: rgba(255, 255, 255, 0.8);
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
border-color: rgba(var(--primary-light), 0.2);
}
textarea:focus {
outline: none;
color: rgba(0, 0, 0, 0.8);
background-color: white;
border-color: var(--primary-light); 
}




:focus::-webkit-input-placeholder { color: #fff; }
:focus:-moz-placeholder { color: #fff; }​

.btn:active {
transform: translateY(1px);
box-shadow: 0 1px 3px rgba(79, 70, 229, 0.2);
}
.btn-success {
background: linear-gradient(135deg, #10B981, #059669);
box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3);
}
.btn-text {
background: none;
color: var(--primary-color);
padding: 0;
height: auto;
font-weight: 500;
box-shadow: none;
}
.btn-text:hover {
background: none;
color: var(--primary-dark);
text-decoration: underline;
box-shadow: none;
}
.btn-text::after {
display: none;
}
.btn i {
margin-right: 0.5rem;
}
.btn-danger {
background: linear-gradient(135deg, #EF4444, #DC2626);
box-shadow: 0 2px 6px rgba(239, 68, 68, 0.3);
}
.btn-sm {
padding: 0.4rem 0.8rem;
height: 2.2rem;
font-size: 0.9rem;
}
.select-wrapper {
position: relative;
margin-bottom: 1.25rem;
}
.select-icon {
position: absolute;
right: 1rem;
top: 50%;
transform: translateY(-50%);
color: var(--text-light);
pointer-events: none;
}
select {
width: 100%;
padding: 0.8rem 1rem;
border: 1px solid var(--border-color);
border-radius: var(--border-radius);
font-size: 1rem;
background-color: rgba(255, 255, 255, 0.8);
appearance: none;
transition: var(--transition);
box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.03);

}
select:focus {
outline: none;
border-color: var(--primary-light);
box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.2);
background-color: white;
}
.voice-selection {
margin-bottom: 1.25rem; /* 减小下方间距 */
}
.voice-selection label {
display: block;
margin-bottom: 0.5rem; /* 减小下方间距 */
font-size: 0.95rem;
color: var(--text-light);
font-weight: 500;
}
.audio-preview {
margin-bottom: 1.25rem; /* 减小下方间距 */
}
.custom-audio-player {
width: 100%;
margin-top: 0.75rem; /* 减小上方间距 */
border-radius: var(--border-radius);
background: #F1F5F9;
padding: 0.75rem; /* 减小内边距 */
box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.05);
}
audio {
width: 100%;
height: 60px; /* 减小音频播放器高度 */
border-radius: 25px;
}
audio::-webkit-media-controls-panel {
background: linear-gradient(135deg, #F1F5F9, #F8FAFC);
}
audio::-webkit-media-controls-play-button {
background-color: var(--primary-light);
border-radius: 50%;
}
.status {
margin-top: 1rem; /* 减小上方间距 */
padding: 0.75rem; /* 减小内边距 */
border-radius: var(--border-radius);
font-size: 0.95rem;
display: none;
animation: fadeInUp 0.4s ease;
font-weight: 500;
}
@keyframes fadeInUp {
from { opacity: 0; transform: translateY(10px); }
to { opacity: 1; transform: translateY(0); }
}
.status.success {
background-color: rgba(16, 185, 129, 0.1);
color: #065F46;
display: block;
border-right: 3px solid var(--success-color);
}
.status.error {
background-color: rgba(239, 68, 68, 0.1);
color: #B91C1C;
display: block;
border-left: 3px solid var(--error-color);
}
.loading {
display: none;
align-items: center;
margin: 1rem 0; /* 减小上下间距 */
font-size: 0.95rem;
color: var(--text-light);
}
.loading .spinner {
display: inline-block;
width: 1.25rem;
height: 1.25rem;
border: 2px solid rgba(79, 70, 229, 0.2);
border-radius: 50%;
border-top-color: var(--primary-color);
animation: spin 1s linear infinite;
margin-right: 0.6rem;
}
@keyframes spin {
to { transform: rotate(360deg); }
}
.history-section {
margin-top: 1.25rem; /* 减小上方间距 */
}
.history-header {
display: flex;
justify-content: space-between;
align-items: center;
margin-bottom: 0.75rem; /* 减小下方间距 */
}
.history-warning {
background-color: rgba(250, 204, 21, 0.1);
border-right: 3px solid #FACC15;
padding: 0.6rem 0.75rem; /* 减小内边距 */
margin-bottom: 1rem; /* 减小下方间距 */
border-radius: var(--border-radius);
font-size: 0.9rem;
color: #854D0E;
display: flex;
align-items: center;
}
.history-warning i {
margin-right: 0.5rem;
color: #EAB308;
}
.history-container {
max-height: 350px; /* 减小历史记录的最大高度 */
overflow-y: auto;
scrollbar-width: thin;
scrollbar-color: var(--primary-light) #F1F5F9;
}
.history-container::-webkit-scrollbar {
width: 6px;
}
.history-container::-webkit-scrollbar-track {
background: #F1F5F9;
border-radius: 10px;
}
.history-container::-webkit-scrollbar-thumb {
background-color: var(--primary-light);
border-radius:;
}
.history-item {
display: flex;
align-items: center;
justify-content: space-between;
padding: 0.75rem 0.5rem; /* 减小内边距 */
border-bottom: 1px solid var(--border-color);
transition: var(--transition);
border-radius: 0.5rem;
}
.history-item:hover {
background-color: rgba(99, 102, 241, 0.04);
}
.history-item:last-child {
border-bottom: none;
}
.history-info {
flex: 1;
min-width: 0;
padding-right: 1rem;
}
.history-timestamp {
font-size: 0.8rem;
color: var(--text-light);
margin-bottom: 0.3rem; /* 减小下方间距 */
}
.history-voice {
font-size: 0.95rem;
font-weight: 600;
display: flex;
align-items: center;
color: var(--primary-dark);
margin-bottom: 0.2rem; /* 减小下方间距 */
}
.history-voice::before {
content: '';
display: inline-block;
width: 0.5rem;
height: 0.5rem;
background: var(--gradient-primary);
border-radius: 50%;
margin-right: 0.5rem;
}
.history-text {
font-size: 0.9rem;
color: var(--text-light);
white-space: nowrap;
overflow: hidden;
text-overflow: ellipsis;
max-width: 100%;
}
.no-history {
color: var(--text-light);
font-size: 0.95rem;
text-align: center;
padding: 1.5rem 0; /* 减小内边距 */
}
footer {
text-align: center;
padding: 2rem 0 1.5rem; /* 减小页脚内边距 */
color: var(--text-light);
font-size: 0.9rem;
opacity: 0.8;
}
footer i {
color: var(--primary-light);
}
/* Feature card */
.features-card {
margin-top: 1.5rem; /* 减小上方间距 */
background: linear-gradient(180deg, #FFFFFF, #F8FAFC);
border-radius: var(--border-radius);
padding: 1.25rem; /* 减小内边距 */
box-shadow: var(--box-shadow);
border: 1px solid var(--border-color);
}
.features-title {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 0.75rem; /* 减小下方间距 */
color: var(--text-color);
text-align: center;
}
.features-list {
list-style-type: none;
padding: 0;
margin: 0;
}
.feature-item {
display: flex;
align-items: flex-start;
margin-bottom: 0.6rem; /* 减小下方间距 */
padding-bottom: 0.6rem; /* 减小内部下方间距 */
border-bottom: 1px solid var(--border-color);
}
.feature-item:last-child {
margin-bottom: 0;
padding-bottom: 0;
border-bottom: none;
}
.feature-icon {
flex-shrink: 0;
width: 24px;
height: 24px;
background: var(--gradient-primary);
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
margin-left: 0.8rem;
margin-top: 0.2rem;
}
.feature-icon i {
font-size: 0.8rem;
color: white;
}
.feature-text {
font-size: 0.95rem;
color: var(--text-color);
line-height: 1.5;
}
/* Animations */
@keyframes pulse {
0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
70% { box-shadow: 0 0 0 10px rgba(99, 102, 241, 0); }
100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
}
@keyframes highlight {
0% { background-color: rgba(99, 102, 241, 0.1); }
100% { background-color: transparent; }
}
.history-item.new {
animation: highlight 2s ease;
}
/* Enhanced indicators */
.badge {
display: inline-flex;
align-items: center;
padding: 0.25rem 0.6rem;
border-radius: 20px;
font-size: 0.8rem;
font-weight: 600;
margin-left: 0.5rem;
background: var(--gradient-secondary);
color: white;
opacity: 0.9;
}
/* 优化语音风格选择按钮 */
.voice-style-selector {
display: grid;
grid-template-columns: repeat(auto-fill, minmax(80px, 1fr)); /* 减小最小宽度 */
gap: 0.4rem; /* 减小间距 */
margin-bottom: 1.25rem; /* 减小下方间距 */
}
.voice-style-option {
min-width: 0;
}
.voice-style-option input[type="radio"] {
display: none;
}
.voice-style-option label {
display: flex;
flex-direction: column;
align-items: center;
padding: 0.5rem 0.3rem; /* 减小内边距 */
border: 2px solid var(--border-color);
border-radius: var(--border-radius);

transition: all 0.2s ease;
background: white;
text-align: center;
font-size: 0.85rem;
height: 100%;
}
.voice-style-option input[type="radio"]:checked + label {
border-color: var(--primary-color);
background: rgba(99, 102, 241, 0.05);
box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.2);
}
.voice-style-icon {
font-size: 1rem;
margin-bottom: 0.2rem; /* 减小下方间距 */
}
.voice-style-name {
font-weight: 600;
font-size: 0.8rem;
margin-bottom: 0.2rem;
line-height: 1.2;
}
.voice-style-desc {
font-size: 0.7rem;
color: var(--text-light);
line-height: 1.1;
}
/* 优化预览窗格 */
.preview-container {
background: linear-gradient(135deg, #f9fafb, #f3f4f6);
border-radius: 15px;
padding: 1.5rem; /* 减小内边距 */
box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
margin-bottom: 1.25rem; /* 减小下方间距 */
position: relative;
overflow: hidden;
min-height: 250px; /* 减小最小高度 */
display: flex;
flex-direction: column;
}
.preview-header {
display: flex;
align-items: center;
margin-bottom: 1.25rem; /* 减小下方间距 */
}
.preview-title {
font-size: 1.2rem;
font-weight: 600;
margin: 0;
display: flex;
align-items: center;
}
.preview-title i {
margin-right: 0.75rem;
font-size: 1.4rem;
background: var(--gradient-primary);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
}
.preview-icon {
position: absolute;
right: -15px;
top: -15px;
width: 80px; /* 减小大小 */
height: 80px; /* 减小大小 */
opacity: 0.05;
transform: rotate(15deg);
color: var(--primary-color);
}
.preview-placeholder {
display: flex;
flex-direction: column;
align-items: center;
justify-content: center;
flex: 1;
color: var(--text-light);
border: 2px dashed #e5e7eb;
border-radius: 10px;
font-size: 0.95rem;
}
.preview-placeholder i {
margin-bottom: 0.75rem; /* 减小下方间距 */
font-size: 2.2rem; /* 减小图标大小 */
opacity: 0.5;
}
/* 优化快捷键提示样式 */
.shortcut-hint {
display: inline-flex;
align-items: center;
margin-left: 0.75rem; /* 减小左边距 */
font-size: 0.8rem;
color: var(--text-light);
vertical-align: middle;
}
.shortcut-hint kbd {
background: #F1F5F9;
padding: 0.1rem 0.3rem;
border-radius: 3px;
border: 1px solid #E2E8F0;
margin: 0 0.2rem;
font-family: monospace;
}
/* 优化使用提示区域 */
.usage-tips {
background: linear-gradient(to right, #faf5ff, #f5f3ff);
border-radius: var(--border-radius);
padding: 1rem; /* 减小内边距 */
margin-top: 1.25rem; /* 减小上方间距 */

}
.tips-title {
font-size: 1rem;
font-weight: 600;
margin-bottom: 0.6rem; /* 减小下方间距 */
display: flex;
align-items: center;

}
.tips-title i {
margin-right: 0.5rem;
color: var(--secondary-color);
}
.tips-list {
list-style: none;
padding: 0;
margin: 0;
}
.tips-list li {
display: flex;
align-items: baseline;
margin-bottom: 0.4rem; /* 减小下方间距 */
font-size: 0.9rem;
}
.tips-list li:before {
content: "※";
color: var(--secondary-color);
font-weight: bold;
margin-left: 0.5rem;
}
.current-voice-info {
display: flex;
align-items: center;
margin-bottom: 0.75rem; /* 减小下方间距 */
background: rgba(255, 255, 255, 0.7);
padding: 0.6rem 0.75rem; /* 减小内边距 */
border-radius: 8px;
}
.current-voice-icon {
width: 36px; /* 减小图标大小 */
height: 36px; /* 减小图标大小 */
border-radius: 50%;
display: flex;
align-items: center;
justify-content: center;
margin-right: 0.6rem; /* 减小右边距 */
color: white;
}
.current-voice-details {
flex: 1;
}
.current-voice-name {
font-weight: 600;
font-size: 1rem;
margin-bottom: 0.1rem; /* 减小下方间距 */
}
.current-voice-desc {
font-size: 0.8rem;
color: var(--text-light);
}
.divider {
height: 1px;
background: var(--border-color);
margin: 1.25rem 0; /* 减小上下间距 */
}
.input-section-title {
font-size: 1.1rem;
font-weight: 600;
margin-bottom: 0.75rem; /* 减小下方间距 */
display: flex;
align-items: center;
}
.input-section-title i {
margin-right: 0.5rem;
color: var(--primary-color);
}
/* 响应式设计 */
@media (max-width: 1024px) {
.content {
flex-direction: column;
}
.text-input-section, .audio-output-section {
width: 100%;
}
}
@media (max-width: 768px) {
.container {
padding: 1rem 0.8rem;
}
h1 {
font-size: 0.4rem;
}
.description {
font-size: 1rem;
padding: 0 1rem;
}
.card {
padding: 1rem; /* 进一步减小移动端的内边距 */
}
.section-title {
font-size: 1.1rem;
margin-bottom: 0.75rem;
}
textarea {
height: 160px; /* 进一步减小移动端的文本框高度 */
}
}

h1 {
	
    font-family: 'Orbitron', sans-serif;
    font-size: 1.2em;
    text-align: center;
    margin: 15px 0;
    color: transparent;
    background: linear-gradient(45deg, #00f3ff 30%, #a855f7 70%);
    -webkit-background-clip: text;
    background-clip: text;
   
    position: relative;
    padding: 10px;
    letter-spacing: 2px;
}

h1::before,
h1::after {
    content: '';
    position: absolute;
    width: 0;
    height: 2px;
background: linear-gradient(45deg, #a855f7 30%, #00f3ff 70%);
    animation: borderExpand 1.5s ease-out forwards;
}

h1::before {
    top: 0;
    left: 0;
}

h1::after {
    bottom: 0;
    right: 0;
    animation-delay: 0.5s;
}

@keyframes borderExpand {
    to {
        width: 100%;
    }
}

.sci-fi-btn {
    position: relative;
    padding: 4px 8px;
    font-family: 'Arial', sans-serif;
    font-size: 1em;
    letter-spacing: 2px;
    text-transform: uppercase;
    color: #00f3ff;
    background: #0a0a2e;
    border: 2px solid #3d3dff;
    border-radius: 8px;
    
    overflow: hidden;
    transition: 0.5s;
    text-shadow: 0 0 10px #00f3ff;
    box-shadow: 0 0 20px rgba(61, 61, 255, 0.3);
}

.sci-fi-btn:hover {
    background: #13134e;
    box-shadow: 0 0 30px rgba(61, 61, 255, 0.6);
    transform: scale(1.05);
    color: #ffffff;
}



.sci-fi-btn:hover::before {
    left: 100%;
}



.glowing-border:nth-child(1) {
    top: -2px;
    left: -2px;
    right: -2px;
    height: 2px;
    background: linear-gradient(90deg, transparent, #3d3dff);
    animation: borderTop 2s linear infinite;
}

@keyframes borderTop {
    0% { left: -2px; }
    100% { left: 100%; }
}

/* 添加点击动画 */
.sci-fi-btn:active {
    transform: scale(0.45);
    transition: 0.1s;
}
</style>
`; 
	
document.body.innerHTML += `
	<div class="blob blob-1"></div>
<div class="blob blob-2"></div>
<div class="container">
<header>


<div style="margin: auto;top: 0;right: 0;left: 0;bottom: 0;width: 80%; border-radius: 10px; background: black; padding: 2px">
<h1>
AI Text to Audio
</h1>
</div>
<p style="margin-top: 25px; " >
أداة متقدمة بالذكاء الإصطناعي تسمح بتحويل النصوص لكلام طبيعي بنقرة واحدة. يدعم مجموعة متنوعة من أنماط الصوت لمساعدتك في إنشاء  صوت احترافي. يدعم الردود على الأسئلة والحوار. كما يدعم تحويل النصوص لكلام وبجميع اللهجات. يكفي مثلا كتابة العبارة أدناه بأول السطر:
<br>
قراءة هذا النص باللهجة المغربية.
<br>
"وبين ضمتين أكتب النص.... " 
</p>

</header>
<div class="content">
<section class="text-input-section">
<div class="card">
<h2 style="margin-bottom: 20px; " class="section-title"><i style="font-size: 25px; margin-left: 4px" class="fas fa-microphone-alt"></i>
أنماط الصوت
</h2>

<div class="voice-style-selector">
<div class="voice-style-option">
<input type="radio" id="voice-alloy" name="voiceStyle" value="alloy" checked>
<label for="voice-alloy">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-alloy);"></i></span>
<span class="voice-style-name">Alloy</span>
<span class="voice-style-desc">Balanced neutral</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-echo" name="voiceStyle" value="echo">
<label for="voice-echo">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-echo);"></i></span>
<span class="voice-style-name">Echo</span>
<span class="voice-style-desc">Deep and powerful</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-fable" name="voiceStyle" value="fable">
<label for="voice-fable">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-fable);"></i></span>
<span class="voice-style-name">Fable</span>
<span class="voice-style-desc">Warm narration</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-onyx" name="voiceStyle" value="onyx">
<label for="voice-onyx">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-onyx);"></i></span>
<span class="voice-style-name">Onyx</span>
<span class="voice-style-desc">Majestic and solemn</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-nova" name="voiceStyle" value="nova">
<label for="voice-nova">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-nova);"></i></span>
<span class="voice-style-name">Nova</span>
<span class="voice-style-desc">Friendly and professional</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-shimmer" name="voiceStyle" value="shimmer">
<label for="voice-shimmer">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-shimmer);"></i></span>
<span class="voice-style-name">Shimmer</span>
<span class="voice-style-desc">Brisk and bright</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-coral" name="voiceStyle" value="coral">
<label for="voice-coral">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-coral);"></i></span>
<span class="voice-style-name">Coral</span>
<span class="voice-style-desc">Gentle and calm</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-verse" name="voiceStyle" value="verse">
<label for="voice-verse">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-verse);"></i></span>
<span class="voice-style-name">Verse</span>
<span class="voice-style-desc">Vivid poetic</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-ballad" name="voiceStyle" value="ballad">
<label for="voice-ballad">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-ballad);"></i></span>
<span class="voice-style-name">Ballad</span>
<span class="voice-style-desc">Lyrical and soft</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-ash" name="voiceStyle" value="ash">
<label for="voice-ash">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-ash);"></i></span>
<span class="voice-style-name">Ash</span>
<span class="voice-style-desc">Think calmly</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-sage" name="voiceStyle" value="sage">
<label for="voice-sage">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-sage);"></i></span>
<span class="voice-style-name">Sage</span>
<span class="voice-style-desc">Wisdom and sophistication</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-amuch" name="voiceStyle" value="amuch">
<label for="voice-amuch">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-amuch);"></i></span>
<span class="voice-style-name">Amuch</span>
<span class="voice-style-desc">Full and natural</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-aster" name="voiceStyle" value="aster">
<label for="voice-aster">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-aster);"></i></span>
<span class="voice-style-name">Aster</span>
<span class="voice-style-desc">Clear and direct</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-brook" name="voiceStyle" value="brook">
<label for="voice-brook">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-brook);"></i></span>
<span class="voice-style-name">Brook</span>
<span class="voice-style-desc">Smooth and comfortable</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-clover" name="voiceStyle" value="clover">
<label for="voice-clover">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-clover);"></i></span>
<span class="voice-style-name">Clover</span>
<span class="voice-style-desc">Lively and young</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-dan" name="voiceStyle" value="dan">
<label for="voice-dan">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-dan);"></i></span>
<span class="voice-style-name">Dan</span>
<span class="voice-style-desc">Male voice steady</span>
</label>
</div>
<div class="voice-style-option">
<input type="radio" id="voice-elan" name="voiceStyle" value="elan">
<label for="voice-elan">
<span class="voice-style-icon"><i class="fas fa-microphone" style="color: var(--voice-elan);"></i></span>
<span class="voice-style-name">Elan</span>
<span class="voice-style-desc">Elegant and fluent</span>
</label>
</div>
</div>
<div class="divider"></div>
<div class="input-section-title"><i style="margin-left: 4px" class="fas fa-pen-fancy"></i>
أدخل النص
</div>

<input id="val" type="text" hidden/>
<input id="comm" type="text" hidden/>
<textarea id="textInput" placeholder=
"النص... "
></textarea>
<div class="text-stats">
<div class="text-stat">
<i style="margin-left: 4px" class="fas fa-text-height"></i>
<span id="charCount">

</span>
</div>
<div class="text-stat">
<i style="margin-left: 4px" class="fas fa-clock"></i>
<span id="durationEstimate">

</span>
</div>
</div>
<div style="display: flex; align-items: center;">
<button id="generateBtn" class="btn">
	<div class="loading" id="loadingIndicator">
<span style=" margin-left: 8px" class="spinner"></span> 
</div>


<svg id="ssvg"  style=" margin-left: 4px" fill="#fff" width="25px" height="25px" viewBox="0 0 56 56" xmlns="http://www.w3.org/2000/svg"><path d="M 27.9999 51.9063 C 41.0546 51.9063 51.9063 41.0781 51.9063 28 C 51.9063 14.9453 41.0312 4.0937 27.9765 4.0937 C 14.8983 4.0937 4.0937 14.9453 4.0937 28 C 4.0937 41.0781 14.9218 51.9063 27.9999 51.9063 Z M 27.9999 47.9219 C 16.9374 47.9219 8.1014 39.0625 8.1014 28 C 8.1014 16.9609 16.9140 8.0781 27.9765 8.0781 C 39.0155 8.0781 47.8983 16.9609 47.9219 28 C 47.9454 39.0625 39.0390 47.9219 27.9999 47.9219 Z M 25.6327 43.5391 C 26.3593 43.5391 26.8983 42.9766 26.8983 42.2500 L 26.8983 13.75 C 26.8983 13.0234 26.3358 12.4375 25.6327 12.4375 C 24.8827 12.4375 24.3202 13.0234 24.3202 13.75 L 24.3202 42.2500 C 24.3202 43.0000 24.8593 43.5391 25.6327 43.5391 Z M 35.1014 40.1406 C 35.8514 40.1406 36.4140 39.5547 36.4140 38.8516 L 36.4140 17.1250 C 36.4140 16.3984 35.8514 15.8359 35.1014 15.8359 C 34.3983 15.8359 33.8358 16.4219 33.8358 17.1250 L 33.8358 38.8516 C 33.8358 39.5547 34.3983 40.1406 35.1014 40.1406 Z M 20.8749 37.1641 C 21.5780 37.1641 22.1405 36.6016 22.1405 35.8750 L 22.1405 20.0781 C 22.1405 19.3750 21.5780 18.8125 20.8749 18.8125 C 20.1483 18.8125 19.5624 19.3750 19.5624 20.0781 L 19.5624 35.8750 C 19.5624 36.6016 20.1483 37.1641 20.8749 37.1641 Z M 30.3671 35.2890 C 31.0936 35.2890 31.6562 34.75 31.6562 34.0234 L 31.6562 21.9531 C 31.6562 21.2266 31.0936 20.6875 30.3671 20.6875 C 29.6405 20.6875 29.0780 21.25 29.0780 21.9531 L 29.0780 34.0234 C 29.0780 34.7266 29.6405 35.2890 30.3671 35.2890 Z M 39.8827 32.5 C 40.6093 32.5 41.1718 31.9609 41.1718 31.2344 L 41.1718 24.7422 C 41.1718 24.0156 40.6093 23.4766 39.8827 23.4766 C 39.1562 23.4766 38.5936 24.0156 38.5936 24.7422 L 38.5936 31.2344 C 38.5936 31.9609 39.1562 32.5 39.8827 32.5 Z M 16.0936 31.3281 C 16.8202 31.3281 17.4062 30.7656 17.4062 30.0625 L 17.4062 25.9141 C 17.4062 25.2109 16.8202 24.6484 16.0936 24.6484 C 15.3905 24.6484 14.8046 25.2109 14.8046 25.9141 L 14.8046 30.0625 C 14.8046 30.7656 15.3905 31.3281 16.0936 31.3281 Z"/></svg>
<span id="generateBtnText">
توليد الصوت
</span>
<span id="generateBtnSpinner" class="spinner" style="display: none; margin-left: 8px;"></span>
</button>
</div>
<div id="statusMessage" class="status"></div>
</div>

</section>
<section class="audio-output-section">
<div class="card">
<div class="preview-container">
<div class="preview-icon">
<i class="fas fa-headphones-alt fa-5x"></i>
</div>
<div class="preview-header">
<h3 class="preview-title"><i style="margin-left: 4px" class="fas fa-play-circle"></i>
معاينة الصوت

</h3>
</div>
<div id="currentVoiceContainer" style="display: none;" class="current-voice-info">
<div style="margin-left: 8px" class="current-voice-icon" id="currentVoiceIcon">
<i class="fas fa-microphone"></i>
</div>
<div class="current-voice-details">
<div class="current-voice-name" id="currentVoiceName"></div>
<div class="current-voice-desc" id="currentVoiceDesc"></div>
</div>
</div>
<div id="audioContainer" style="flex: 1; display: flex; flex-direction: column; justify-content: center;">
<div class="preview-placeholder" id="noAudioMessage">
<i class="fas fa-music"></i>
<span>
لا صوت تم إنشاؤه بعد! 

</span>
</div>
</div>
</div>
<div id="downloadContainer" style="display: none;">
<button id="downloadBtn" class="btn btn-success">
<i  style="margin-left: 4px" class="fas fa-download"></i>
تحميل الصوت
</button>
</div>
</div>

<div id="kkm" class="card history-section">
	
<div class="history-header">
<button id="clearHistoryBtn" class="btn btn-sm btn-danger">
<i  style="margin-left: 4px;" class="fas fa-trash"></i>
مسح السجل
</button>
</div>

<div class="history-warning">
<i  style="  margin-right: 4px; margin-left: 14px; font-size: 25px; " class="fas fa-exclamation-triangle"></i>
سيتم إعادة تعيين روابط التحميل، يرجى الإنتباه للتنزيل قبل مسح السجل.
</div>
<h2 style="margin-top: 26px; font-size:15px; " class="section-title"><i  style="margin-left: 10px" class="fas fa-history"></i>
سجل ملفات الصوت المُولدة
</h2>

<div class="history-container" id="historyContainer">
<div id="historyList">
<p class="no-history">
لا يوجد أي سجل بعد! 
</p>
</div>
</div>
</div>


<div class="usage-tips">
<div class="tips-title"><i style="margin-left: 4px" class="fas fa-lightbulb"></i>

	إرشادات
	
</div>

<ul class="tips-list">
<li>يمكن أن يؤدي استخدام علامات الترقيم إلى تحسين الوقفات الطبيعية وتغيرات النبرة في الكلام.</li>
<li>تناسب أنماط الصوت المختلفة سيناريوهات مختلفة؛ جرب أنماطًا متعددة للعثور على الأنسب.</li>
<li>يمكن تقسيم النصوص الطويلة إلى فقرات متعددة ثم دمجها بعد الإنشاء للحصول على نتائج أفضل.</li>
<li>قد تتطلب المصطلحات المتخصصة تدوينًا صوتيًا أو استبدالها بتعبيرات أكثر شيوعًا.</li>
</ul>
</div>

<div class="features-card">
<h3 class="features-title">
	<span class="badge">
خصائص الصوت
</span>
</h3>
<ul class="features-list">
<li  style="margin-left: 4px" class="feature-item">
<div class="feature-icon">
<i  style="margin-left: 4px" class="fas fa-volume-high"></i>
</div>
<div class="feature-text">
تخليق كلام طبيعي وسلس، قريب من نطق الشخص الحقيقي، كما ويدعم اللهجات المحلية.
</div>
</li>


<li class="feature-item">
<div class="feature-icon">
<i style="margin-left: 4px" class="fas fa-sliders"></i>
</div>
<div class="feature-text">
تتوفر مجموعة متنوعة من أنماط الصوت لتلبية احتياجات السيناريوهات المختلفة.
</div>
</li>
<li class="feature-item">
<div class="feature-icon">
<i class="fas fa-align-left"></i>
</div>
<div class="feature-text">
يدعم تحويل النصوص الطويلة، ومناسب لإنشاء محتوى متنوع.
</div>
</li>
<li class="feature-item">
<div class="feature-icon">
<i class="fas fa-download"></i>
</div>
<div class="feature-text">
تنزيل الصوت المُولد بصيغة (MP3) لمشاركته بمختلف المنصات.
</div>
</li>
<li class="feature-item">
<div class="feature-icon">
<i class="fas fa-history"></i>
</div>
<div class="feature-text">
حفظ السجل محليًا لسهولة إعادة الإستخدام والمقارنة.
</div>
</li>
</ul>
</div>
</section>
</div>
<footer>

<p> تحفة العروس | © 2025 </p>
</footer>
</div>`; 


	const kkj = localStorage.getItem("kkm"); 
	    if(kkj == "block"){   
    	document.getElementById('kkm').style.display='block';
		} else{
			document.getElementById('kkm').style.display='none';
			} 
   const comm = document.getElementById('comm'); 	
   const vall = document.getElementById('val'); 	
document.addEventListener('DOMContentLoaded', function() {
const textInput = document.getElementById('textInput');
const voiceSelect = document.getElementById('voiceSelect');
const generateBtn = document.getElementById('generateBtn');
const generateBtnText = document.getElementById('generateBtnText');
const generateBtnSpinner = document.getElementById('generateBtnSpinner');
const downloadBtn = document.getElementById('downloadBtn');
const audioContainer = document.getElementById('audioContainer');
const noAudioMessage = document.getElementById('noAudioMessage');
const downloadContainer = document.getElementById('downloadContainer');
const loadingIndicator = document.getElementById('loadingIndicator');
const statusMessage = document.getElementById('statusMessage');
const historyList = document.getElementById('historyList');
const charCount = document.getElementById('charCount');
const durationEstimate = document.getElementById('durationEstimate');
const clearHistoryBtn = document.getElementById('clearHistoryBtn');
const currentVoiceContainer = document.getElementById('currentVoiceContainer');
const currentVoiceIcon = document.getElementById('currentVoiceIcon');
const currentVoiceName = document.getElementById('currentVoiceName');
const currentVoiceDesc = document.getElementById('currentVoiceDesc');
const MAX_HISTORY_ITEMS = 10; // Limit history to 10 items
const CHARS_PER_MINUTE = 150; // Estimated speaking speed
const voiceDescriptions = {
    'alloy': 'Balanced and neutral',
    'echo': 'Deep and powerful',
    'fable': 'Warm and narrative',
    'onyx': 'Majestic and dignified',
    'nova': 'Friendly and professional',
    'shimmer': 'Light and bright',
    'coral': 'Gentle and calm',
    'verse': 'Vivid and poetic',
    'ballad': 'Lyrical and soft',
    'ash': 'Thoughtful and steady',
    'sage': 'Wise and experienced',
    'amuch': 'Full and natural',
    'aster': 'Clear and direct',
    'brook': 'Smooth and comfortable',
    'clover': 'Lively and youthful',
    'dan': 'Stable male voice',
    'elan': 'Elegant and fluent',
    'marilyn': 'Soft and round',
    'meadow': 'Peaceful and natural'
};
const voiceColors = {
    'alloy': '#4F46E5',
    'echo': '#6366F1',
    'fable': '#8B5CF6',
    'onyx': '#333333',
    'nova': '#10B981',
    'shimmer': '#60A5FA',
    'coral': '#F87171',
    'verse': '#FBBF24',
    'ballad': '#A78BFA',
    'ash': '#4B5563',
    'sage': '#059669',
    'amuch': '#F59E0B',
    'aster': '#2563EB',
    'brook': '#3B82F6',
    'clover': '#EC4899',
    'dan': '#1F2937',
    'elan': '#7C3AED',
    'marilyn': '#DB2777',
    'meadow': '#34D399'
};
let audioBlob = null;
let history = [];
const voiceStyleOptions = document.querySelectorAll('.voice-style-option input[type="radio"]');
voiceStyleOptions.forEach(option => {
    option.addEventListener('change', function() {
        if(this.checked) {
            voiceSelect.value = this.value;
        }
    });
});
// Load history from localStorage
loadHistory();
// Update character count and duration estimate as user types
textInput.addEventListener('input', updateTextStats);
function updateTextStats() {
    const text = vall.value + textInput.value.trim()    + comm.value; 
    const count = text.length;
    // Update character count
    charCount.textContent = `${count}`;
    // Calculate and update duration estimate
    const durationMinutes = count / CHARS_PER_MINUTE;
    let durationText;
    if (durationMinutes < 1/60) {
        durationText = '1-';
    } else if (durationMinutes < 1) {
        const seconds = Math.round(durationMinutes * 60);
        durationText = `${seconds} S`;
    } else {
        const minutes = Math.floor(durationMinutes);
        const seconds = Math.round((durationMinutes - minutes) * 60);
        if (seconds === 0) {
            durationText = `${minutes} M`;
        } else {
            durationText = `${minutes} M ${seconds} S`;
        }
    }
    durationEstimate.textContent = ` ${durationText}`;
}
// Function to update the current voice display
function updateCurrentVoiceDisplay(voice) {
    const voiceName = voice.charAt(0).toUpperCase() + voice.slice(1);
    const voiceDesc = voiceDescriptions[voice] || '';
    const voiceColor = voiceColors[voice] || '#4F46E5';
    currentVoiceName.textContent = voiceName;
    currentVoiceDesc.textContent = voiceDesc;
    currentVoiceIcon.style.backgroundColor = voiceColor;
    currentVoiceContainer.style.display = 'flex';
}
// Function to generate audio from text
async function generateAudio() {
    const text = vall.value + textInput.value.trim()    + comm.value; 
    const selectedVoiceElement = document.querySelector('.voice-style-option input[type="radio"]:checked');
    const voice = selectedVoiceElement ? selectedVoiceElement.value : voiceSelect.value;
    if (text =="") {
        generateBtnText.textContent=  "أدخل النص أولا"; 
        document.getElementById('ssvg').style.display='none';
            	    setTimeout(() => { 
        generateBtnText.textContent=  "توليد الصوت";      
document.getElementById('ssvg').style.display='block';   
            }, 2000);
            return;
    }
    else{
    comm.value= "     مَعَ تَحِيَاتْ مَكْتَبْ تُحْفَة العَروسْ بالمملكة المغربية";	
    } 
    // Show loading indicators
    
    loadingIndicator.style.display = 'flex';
    generateBtnText.textContent = "جاري توليد الصوت... ";
    document.getElementById('ssvg').style.display='none';
    generateBtnSpinner.style.display = 'inline-block';
    generateBtn.disabled = true;
     generateBtn.style.background ='#CBC9FF';  
     generateBtn.style.color ='#4F46E5';   
    // Hide any previous status message
    statusMessage.style.display = 'none';
    try {
        // Create the URL with the encoded text and selected voice
        const url = `https://text.pollinations.ai/${encodeURIComponent(text)}?model=openai-audio&voice=${voice}`;
        // Fetch the audio file
        const response = await fetch(url);
        if (!response.ok) {
            throw new Error(`Error: ${response.status} ${response.statusText}`);
        }
        // Get the audio blob
        audioBlob = await response.blob();
        // Create a URL for the blob
        const audioUrl = URL.createObjectURL(audioBlob);
        // Create audio element
        if (document.getElementById('audioElement')) {
            document.getElementById('audioElement').remove();
        }
        const audioElement = document.createElement('audio');
        audioElement.id = 'audioElement';
        audioElement.controls = true;
        audioElement.src = audioUrl;
        audioElement.className = 'custom-audio';
        // Create custom player container
        const customPlayerDiv = document.createElement('div');
        customPlayerDiv.className = 'custom-audio-player';
        customPlayerDiv.appendChild(audioElement);
        // Replace no audio message with audio element
        if (noAudioMessage) {
            noAudioMessage.style.display = 'none';
        }
        audioContainer.innerHTML = ''; 
        audioContainer.appendChild(customPlayerDiv);
        // Show download button
        downloadContainer.style.display = 'block';
        // Update current voice display
        updateCurrentVoiceDisplay(voice);
        // Get preview text (first 20 characters)
        const previewText = text.substring(0, 20) + (text.length > 20 ? '...' : '');
        // Add to history
        const timestamp = new Date();
        const historyItem = {
            id: Date.now(),
            timestamp: timestamp,
            voice: voice,
            text: text,
            previewText: previewText,
            blob: audioBlob
        };
        // Add new item to the beginning and limit to 10 items
        history.unshift(historyItem);
        if (history.length > MAX_HISTORY_ITEMS) {
            history = history.slice(0, MAX_HISTORY_ITEMS);
        }
        saveHistory();
        updateHistoryUI(historyItem.id); // Pass the new item ID to highlight it
        showStatus('تم توليد الصوت بنجاح ', 'success');
        // Play the audio automatically
        audioElement.play();
            	localStorage.setItem('kkm','block');
    	document.getElementById('kkm').style.display='block';
    } catch (error) {
        console.error('حذث خطأ ', error);
        showStatus(`${error.message}`, 'error');
    } finally {
        // Hide loading indicators
        loadingIndicator.style.display = 'none';
             generateBtn.style.background ='var(--gradient-primary)';  
     generateBtn.style.color ='#fff';   
        generateBtnText.textContent = "توليد الصوت";
        document.getElementById('ssvg').style.display='block';
        generateBtnSpinner.style.display = 'none';
        generateBtn.disabled = false;
    }
}
// Function to download the generated audio
function downloadAudio(blob, filename) {
    if (!blob) {
        showStatus('لا صوت للتحميل', 'خطأ');
        return;
    }
    const downloadUrl = URL.createObjectURL(blob);
    const a = document.createElement('a');
    a.href = downloadUrl;
    a.download = filename || `audio_${new Date().getTime()}.mp3`;
    document.body.appendChild(a);
    a.click();
    document.body.removeChild(a);
    URL.revokeObjectURL(downloadUrl);
}
// Function to download history item
function downloadHistoryItem(id) {
    const item = history.find(h => h.id === id);
    if (item) {
        const sanitizedText = item.previewText.replace(/[^\w\u4e00-\u9fa5]/g, '');
        const fileName = `${item.voice}_${sanitizedText}.mp3`;
        downloadAudio(item.blob, fileName);
    }
}
// Function to update the history UI
function updateHistoryUI(newItemId) {
    if (history.length === 0) {
        historyList.innerHTML = '<p class="no-history">لا يوجد أي سجل بعد! </p>';
        return;
    }
    historyList.innerHTML = '';
    // Display only the 10 most recent items
    history.forEach(item => {
        const historyItem = document.createElement('div');
        historyItem.className = 'history-item';
        if (item.id === newItemId) {
            historyItem.classList.add('new');
        }
        // Format timestamp
        const date = item.timestamp;
        const formattedDate = `${date.getFullYear()}-${(date.getMonth()+1).toString().padStart(2, '0')}-${date.getDate().toString().padStart(2, '0')} ${date.getHours().toString().padStart(2, '0')}:${date.getMinutes().toString().padStart(2, '0')}`;
        historyItem.innerHTML = `
            <div class="history-info">
                <div class="history-timestamp">${formattedDate}</div>
                <div class="history-voice">${item.voice}</div>
                <div class="history-text">${item.previewText}</div>
            </div>
            <button class="btn btn-text history-download" data-id="${item.id}">
                <i style="margin-left: 4px" class="fas fa-download"></i>تنزيل
            </button>
        `;
        historyList.appendChild(historyItem);
    });
    // Add event listeners to download buttons
    document.querySelectorAll('.history-download').forEach(btn => {
        btn.addEventListener('click', () => {
            const id = parseInt(btn.getAttribute('data-id'), 10);
            downloadHistoryItem(id);
        });
    });
}
// Function to clear all history
function clearHistory() {
    if (confirm('هل أنت متأكد من مسح السجل بالكامل؟')) {
    	localStorage.setItem('kkm','none');
    	document.getElementById('kkm').style.display='none';
        history = [];
        localStorage.removeItem('audioGeneratorHistory');
        updateHistoryUI();
        showStatus('History cleared', 'success');
    }
}
// Function to save history to localStorage
function saveHistory() {
    // We can't store blobs in localStorage, so we'll store other info and keep blobs in memory
    const historyData = history.map(item => ({
        id: item.id,
        timestamp: item.timestamp.toISOString(),
        voice: item.voice,
        text: item.text,
        previewText: item.previewText
    }));
    try {
        localStorage.setItem('audioGeneratorHistory', JSON.stringify(historyData));
    } catch (e) {
        console.error('Error saving history to localStorage:', e);
    }
}
// Function to load history from localStorage
function loadHistory() {
    try {
        const historyData = localStorage.getItem('audioGeneratorHistory');
        if (historyData) {
            const parsedHistory = JSON.parse(historyData);
            history = parsedHistory.map(item => ({
                ...item,
                timestamp: new Date(item.timestamp),
                blob: null // We don't store blobs in localStorage
            }));
            // Limit to MAX_HISTORY_ITEMS
            if (history.length > MAX_HISTORY_ITEMS) {
                history = history.slice(0, MAX_HISTORY_ITEMS);
            }
            updateHistoryUI();
        }
    } catch (e) {
        console.error('Error loading history from localStorage:', e);
    }
}
// Function to show status messages
function showStatus(message, type) {
    statusMessage.textContent = message;
    statusMessage.className = `status ${type}`;
    statusMessage.style.display = 'block';
    // Hide status after 5 seconds
    setTimeout(() => {
        statusMessage.style.display = 'none';
    }, 5000);
}
// Event listeners
generateBtn.addEventListener('click', generateAudio);
downloadBtn.addEventListener('click', () => {
    if (audioBlob) {
        const text = vall.value + textInput.value.trim()    + comm.value; 
        const selectedVoiceElement = document.querySelector('.voice-style-option input[type="radio"]:checked');
        const voice = selectedVoiceElement ? selectedVoiceElement.value : voiceSelect.value;
        const previewText = text.substring(0, 20).replace(/[^\w\u4e00-\u9fa5]/g, '');
        const fileName = `${voice}_${previewText}.mp3`;
        downloadAudio(audioBlob, fileName);
    }
});
// Add keyboard shortcut (Ctrl+Enter) to generate audio
textInput.addEventListener('keydown', function(e) {
    if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
        e.preventDefault();
        generateAudio();
            	localStorage.setItem('kkm','block');
    	document.getElementById('kkm').style.display='block';
    }
});
// Clear history button
clearHistoryBtn.addEventListener('click', clearHistory);
// Initialize text stats
updateTextStats();

});
	
	</script>

</body>
</html>
